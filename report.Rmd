---
title: "Research on COVID-19 and vaccination"
author:
- familyname: Anukarnsakulchularp
  othernames: Krisanat
  address: Monash University
  email: kanu0003@student.monash.edu
  correspondingauthor: true
  qualifications:  Master of Business Analytics
- familyname: Vatsal
  othernames: Kumar
  address: Monash University
  email: kvat0001@student.monash.edu
  correspondingauthor: true
  qualifications:  Master of Business Analytics
- familyname: Zhou
  othernames: Xiyun 
  address: Monash University
  email: xzho0054@student.monash.edu
  correspondingauthor: true
  qualifications:  Master of Actuarial Studies
- familyname: Hu
  othernames: Xinyu
  address: Monash University
  email: xhu103@student.monash.edu
  correspondingauthor: true
  qualifications:  Master of Applied Economics and Econometrics  
department: Subject ETC5513\newline Group Name\newline Quad Squad
organization: Monash University
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1.5
output:
  bookdown::pdf_document2:
    template: monashreport2.tex
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: false
---


```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      eval = TRUE,
                      message = FALSE,
                      warning = FALSE,
                      error = FALSE,
                      fig.align = "center",
                      fig.width = 6, 
                      fig.height = 3.5)
```



```{r , echo = FALSE, message = FALSE, warning = FALSE}
# Libraries

library(rmarkdown) 
library(bookdown) 
library(readr) 
library(bookdown) 
library(kableExtra) 
library(dplyr) 
library(knitr) 
library(ggplot2) 
library(tidyverse)


```


```{r echo = FALSE, message = FALSE, warning = FALSE, results = 'hide'}
# Read data
dat <- read.csv(file = "Data/COVID_dat_after_sanitize.csv") 

# NA summary
summary(is.na(dat))
``` 

\clearpage
# **Introduction** 

Since the first outbreak of Covid-19 in late 2019, there have been more than 500 million confirmed cases. To curb the spread, governments around the world had taken several measures like imposing restrictions on travelling, lockdown, and introducing social-distance. 

To bring this pandemic to an end, a large share of the world needs to be immune to the virus. The safest way to achieve this is with a vaccine. Vaccines are a technology that humanity has often relied on in the past to bring down the death toll of infectious diseases.

Fortunately in 2021, COVID-19 vaccines were introduced, it would require an incredibly-high vaccination rate to reduce the spread of the virus. Although the vaccines are not able to prevent infection, yet they are efficient at keeping the mortality rate low. “You may wonder if the vaccine is so effective, why are we still having a growth in the infection rate.”

We collected data from a public data base in github [COVID-19 data](https://github.com/owid/covid-19-data/tree/master/public/data). In this report, we focus on overall COVID-19 analysis and explore the relationship between the pandemic and the vaccination by the world range. 

The packages we will be using in this analysis are @tidyverse, @readr, @kableExtra, @bookdown, @bookdown2, and @ggplot2



\clearpage



# **Research questions** :



**1)The overall analysis of COVID-19.**


**2)The Effects of government policies on the spread of COVID- 19 worldwide.**


**3)How do positive cases change relate to vaccination?**


**4)How do death rates from COVID-19 differ between people who are vaccinated and those who are not?**





\clearpage

## **The overall analysis of covid-19**

```{r,echo=FALSE, include = FALSE, message= FALSE, warining = FALSE}
##data sanitize 
covid_data <- read_csv("Data/owid-covid-data.csv")
f_d<-filter(covid_data, date >= as.Date("2021-01-30"))

COVID_dat_after_sanitize<- select(f_d,location|continent|  date|people_fully_vaccinated|people_fully_vaccinated_per_hundred|new_cases|total_cases|new_deaths|new_deaths_per_million|total_deaths_per_million)  %>% 
  na.omit()


```



```{r Figure1, echo= FALSE, warning = FALSE, fig.width = 6, fig.align="center", fig.cap ="COVID-19 Daily new cases"}

sum_cases<-COVID_dat_after_sanitize%>% 
  group_by(continent, date)%>%
  summarise(daily_new_cases=sum(new_cases), .groups = 'drop') 
 
sum_cases %>% ggplot(aes(x=date, y=daily_new_cases)) +
            geom_line(aes(col=continent))

```

 
 
The line chart \@ref(fig:Figure1) indicate from January 2021 to May 2022, the daily new cases show an upward trend. There are 3 times breakout in most regions, which occurs in the May 2021, August 2021, and February 2022. Especially in the past few months, the average daily cases reach to the highest point. Some countries in Europe and North America region have more than 1 million new cases every day. And European countries always have the highest daily cases in this period. 
 
 
 
 
 
 

  
```{r Table1, echo = FALSE, warning=FALSE}

sum <- COVID_dat_after_sanitize %>%
  group_by(location) %>% 
  summarise("average daily cases"= round(mean(new_cases)),
            "average daily deaths" = mean(new_deaths),
            "People fully vaccinated in percentage" = max(people_fully_vaccinated_per_hundred), .groups = 'drop') 


sum %>% select(location,`average daily cases` )%>% 
   arrange(desc(`average daily cases`)) %>%
    slice(1:5) %>% 
     kable("latex", caption = "Countries with Highest Average Daily Cases") %>% 
    kable_styling(latex_options = c("striped", "hold_position")) 
```

Table \@ref(tab:Table1) list the top 5 countries with the highest average daily cases. The average daily cases are more than 1 million in United State. 
In the following, the countries in the table will be utilised to examine the relationship between vaccination and daily new cases.


```{r Figure2, echo= FALSE, warning = FALSE, fig.width = 5, fig.align="center", fig.cap ="Average daily deaths attributed to COVID-19"}

new_dat<-COVID_dat_after_sanitize%>% 
  group_by(continent, date) %>% 
  summarise(daily_mean_deaths=mean(new_deaths), .groups = 'drop') 
 
new_dat %>% ggplot(aes(x=date, y=daily_mean_deaths))+
            geom_line(aes(col=continent))


```
The overall of graph \@ref(fig:Figure2) show a decline trend of average daily deaths attributed to COVID-19. The North America area has the greatest daily deaths in early 2021, and then the number of deaths drops dramatically beginning in May 2021. After October 2021, the average daily death toll in North America never exceed 500. 

```{r Table2,  echo = FALSE, warning = FALSE} 

options(digits=0)

sum %>% select(location,`average daily deaths`) %>% 
  arrange(round(desc(`average daily deaths`)), 0) %>%
    slice(1:5) %>% 
   kable("latex", caption = "COVID-19 Highest Average Daily Deaths Countries") %>% 
    kable_styling(latex_options = c("striped", "hold_position")) 
```
Table \@ref(tab:Table2) list the top 5 countries with the highest average daily deaths caused by COVID-19. 
In the following, the countries in the table will be using to analyse the relationship between vaccination and daily deaths.

```{r Figure3, echo = FALSE, warining=FALSE, fig.width = 6, fig.align="center", fig.cap = "People fully vaccinated in percentage by region"}

vax_<- COVID_dat_after_sanitize %>%
  filter(people_fully_vaccinated_per_hundred <100) %>%  
  group_by(location, continent) %>% 
  summarise("People fully vaccinated in percentage" = max(people_fully_vaccinated_per_hundred), .groups = 'drop') %>% 
  group_by(continent) %>% 
  summarise("People fully vaccinated in percentage in average" = mean(`People fully vaccinated in percentage`), .groups = 'drop') 

vax_%>% 
ggplot(aes(x=continent, 
            y=`People fully vaccinated in percentage in average`, fill =continent)) +       
geom_bar(stat='identity')

```
The barplot \@ref(fig:Figure3) shows the fully vaccination rate by regions. Except Africa region, the fully vaccinated rate over 50% in other continent.  According to the research @African-COVID-19-vaccination, at the end of December 2021, only 7 African countries with relatively smaller populations (Seychelles, Mauritius, Morocco, Tunisia, Comoros, Botswana, and Cape Verde) met the 40% target. The African continent's fundamentally deficient health systems are undoubtedly leading to insufficient COVID-19 vaccination capability.


\clearpage

\section*{ How do positive cases change relate to vaccination?}


\subsection*{top 5 countries with highest daily new cases}

```{r table3, echo = FALSE, message = FALSE, warning = FALSE,fig.cap= "top 10 countries with highest daily cases"}
options(digits = 0)

sum_dat1<-dat %>% 
  group_by(location)%>%
  mutate(new_people_fully_vaccinated = people_fully_vaccinated- lag(people_fully_vaccinated))%>%
  summarise(mean_daily_cases = mean(new_cases),
         mean_new_vax = mean(new_people_fully_vaccinated, na.rm = TRUE))%>%
  arrange(desc(mean_daily_cases))
  kable(head(sum_dat1,10), "latex", caption = "top 10 countries with highest daily cases", booktabs = T) %>%
  kable_styling(latex_options = c("striped", "hold_position"))

```

```{r  echo = FALSE, message = FALSE, warning = FALSE, results = 'hide'}
top5 <- dat%>%
  filter(location %in% c("United States", "India", "France", "Germany", "Brazil"))%>%
  select(!X)
```

\subsection*{Trend of trend of new cases vs fully vaccinated}
```{r figure4, echo = FALSE, message = FALSE, warning = FALSE, results = 'hide' ,fig.cap = "trend of new cases vs fully vaccinated"}
p1<-ggplot(data = top5, aes(x = base::as.Date(date), y = new_cases, colour = location ))+
  geom_line() +
  theme_bw() +
  labs(y = "New Cases", x="Date")

p2<-ggplot(data = top5, aes(x = base::as.Date(date), y = people_fully_vaccinated, colour = location))+
  geom_line() +
  theme_bw() +
  labs(y = "People Fully Vaccinated", x="Date")
       

                
gridExtra::grid.arrange(p1, p2, nrow=2)    
```



\clearpage


\subsection*{Trend of trend of new cases vs fully vaccinated}
```{r figure5, echo = FALSE, message = FALSE, warning = FALSE, fig.width = 6, results = 'hide' ,error = FALSE, fig.cap = "correlation between new cases vs fully vaccinated"}
ggplot(data = top5, aes(x=people_fully_vaccinated, y = new_cases))+
  geom_point()+
  geom_smooth()+
  labs(x = "people fully vaccinated" , y = "new daily cases")+
  facet_wrap(~location, scales = "free")

```

We sorted out countries by the order of mean new daily cases, referring \@ref(tab: table3), the table showcases top 10 countries with highest mean value of daily cases, our research onward will based on the top 5 countries, US, Brazil, India, Germany, France. From table \@ref(tab:table3), United States has the highest daily cases and India did the best in terms of vaccination.

Line chart \@ref(fig:figure4) showcases the trend of new cases and fully vaccinated people from 2021 to latest data, and from the line chart, there is no corresponding effect between them. @lipsitch2020understanding mentioned that the effectiveness of vaccination varies within different condition of health, however, both direct and indirect protection reduce virus symptoms generally. 

Plot chart \@ref(fig:figure5) was generate to explore relationship between vaccination and new cases, with vaccination on x axis, daily cases in y axis, the graph did not show significant correlation between them, smooth line was added to overview general movement. the graph further prove there is no expected higher vaccination with lower infections in the top 5 countries. @chen2021prediction discussed the how mutation reduce the effectiveness of vaccination in terms of infection protection, and the research team mentioned we need to develop vaccine to deal with predicted mutation.




\clearpage
\section*{ How do death rates from COVID-19 differ between people who are vaccinated and those who are not}




\clearpage
\section*{}



\clearpage
\section*{}



# **CONCLUSIONS**

Globally, after the continued decline observed since the end of March 2022, new daily COVID-19 cases have stabilized in the latest weeks. And the number of new daily deaths continues to decline. 

The vaccination seems to not affect the spread of the virus due to mutation.

